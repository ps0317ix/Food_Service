<!DOCTYPE html>
<html>
  <head>
    <title>FoodService</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= include_gon %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag "jquery.cookie.js" %>


    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/v-lazy-image@1.4.0/dist/v-lazy-image.min.js"></script>
    <script src="https://unpkg.com/vuejs-paginate@2.1.0"></script>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.css">
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.4/js.cookie.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sanitize-html@2.3.0/index.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/vue-burger-menu@2.0.3/dist/vue-burger-menu.umd.js"></script>



  </head>

  <body>
    <header id="app">
      <ul>
        <li>
          <!-- ヘッダーロゴ -->
          <div class="">
            <%= link_to "のぐろぐ", "/" %>
          </div>
        </li>
        <li>
        <!-- 検索フォーム -->
          <%= form_tag("/search_exe",:method => 'get') do %>
            <%= text_field_tag :search %>
            <%= submit_tag 'Search', :name => nil %>
          <% end %>
        </li>
        <slide right>
        <!-- ユーザー認証をした場合 -->
        <% if @current_user %>
          <li>
            <%= link_to(@current_user.name, "/users/#{@current_user.id}") %>
          </li>
          <li>
            <%= link_to "エリア・店舗情報作成", "/place/new" %>
          </li>
          <li>
            <%= link_to "ランキング更新", "/place/edit" %>
          </li>
          <li>
            <%= link_to "ログアウト", "/logout" %>
          </li>
        <% else %>
          <li>
            <%= link_to "新規会員登録", "/signup" %>
          </li>
          <li>
            <%= link_to "ログイン", "/login" %>
          </li>
        <% end %>
        </slide>
      </ul>

    </header>

    <%= yield %>


    <footer>
      <div class="container">
        <div class="footer_links">
          <h3>エリア一覧</h3>
          <div class="pc">
            <ul>
            <% @x = 1
                @tabelogPlaces.each do |place|
                  if @x % 11 == 0 %>
                  <!-- 10カラムで改行 -->
                    <ul>
                  <% end %>
                <li><%= link_to "#{place.area}", "/place/#{place.area}/ranking" %></li>
                  <% if @x % 10 == 0 %>
                    </ul>
                  <% end %>
              <% @x += 1
                end %>
            </ul>
          </div>
          <div class="sp">
            <% @x = 0
                @tabelogPlaces.each do |place|
                  if @x % 4 == 0 %>
                  <!-- 10カラムで改行 -->
                    <ul>
                  <% end
                  @x += 1 %>
                <li><%= link_to "#{place.area}", "/place/#{place.area}/ranking" %></li>
                  <% if @x % 4 == 0 && @x > 0%>
                    </ul>
                  <% end %>
              <%
                end %>
          </div>
        </div>
    </footer>
  </body>
  <script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyCpM_NXjd2FB5C8spyddfKd9rDDVndEIkA&callback=initMap" async defer></script>
  <script type="text/javascript">
    const {Slide} = window['vue-burger-menu'];

    Vue.component('slide', Slide);

    let app = new Vue({
      el: '#app'
    });

    var windowWidth = $(window).width();
    var windowSm = 640;
    if (windowWidth <= windowSm) {
        //横幅640px以下のとき（つまりスマホ時）に行う処理を書く
    } else {
        //横幅640px超のとき（タブレット、PC）に行う処理を書く
        var list_cnt = $('.area_list').length;
        console.log(list_cnt);
    }
  </script>
</html>
